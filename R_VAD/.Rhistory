ggplot(vad.dt, aes(date_time, ht)) +
meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = spd, color = ..level..))
ggplot(vad.dt[na.acum < 3], aes(date_time, ht)) +
meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = spd, color = ..level..))
ggplot(vad.dt, aes(date_time, ht)) +
meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_tile(fill = "white", data = vad.dt[na.acum >= 3]) +
geom_contour(aes(z = spd, color = ..level..))
ggplot(vad.dt, aes(date_time, ht)) +
meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = spd.smooth))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum < 4, spd.smooth, NA)))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum < 5, spd.smooth, NA)))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA))) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..))
vad.dt[, conf := na.acu <= 4]
vad.dt[, conf := na.acum <= 4]
group_by(vad_20170120, ht) %>%
mutate(dv = c(NA, NA, diff(diff(spd)))) %>%
mutate(dvs = as.numeric(scale(dv))) %>%
ggplot(aes(date_time, spd)) +
geom_line() + #geom_smooth(span = 0.2) +
facet_wrap(~ht, scales = "free_y")
ggplot(vad.dt, aes(date_time)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
geom_point(aes(y = 1, size = na.acum)) +
facet_wrap(~ht)
ggplot(vad.dt, aes(date_time)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
geom_col(aes(y = na.acum)) +
facet_wrap(~ht)
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht)
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
theme_bw()
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
theme_minimal()
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
ylab("Velocidad (m/s)") +
theme_minimal()
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA))) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..))
ggplot(vad.dt, aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red", binwidth = 1) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_color_distiller(name = "Velocidad", type = "seq", palette = 1, direction = 1) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_color_distiller(name = "Velocidad", type = "seq", palette = 2, direction = 1) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_color_distiller(name = "Velocidad", type = "seq", palette = 8, direction = 1) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_color_distiller(name = "Velocidad", type = "seq", palette = 4, direction = 1) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_color_distiller(name = "Velocidad", type = "seq", palette = 5, direction = 1) +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
library(ggplot2)
library(reshape2)
library(lubridate)
library(RadioSonde)
library(gridBase)
library(grid)
library(magrittr)
source("geom_arrow.R")
source("helpfun.R")
vad_20160114 <- read.vad("../../20160114_240/vda*")
dia <- vad_20160114
vad.dt <- as.data.table(vad_20160114)
library(data.table)
vad.dt <- as.data.table(vad_20160114)
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.12, evaluation = .N)$y,
by = ht]
vad.dt[, na.acum := zoo::rollsum(is.na(spd), k = 6, fill = NA), by = ht]
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
ylab("Velocidad (m/s)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.10, evaluation = .N)$y,
by = ht]
vad.dt[, na.acum := zoo::rollsum(is.na(spd), k = 6, fill = NA), by = ht]
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
ylab("Velocidad (m/s)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.05, evaluation = .N)$y,
by = ht]
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.08, evaluation = .N)$y,
by = ht]
vad.dt[, na.acum := zoo::rollsum(is.na(spd), k = 6, fill = NA), by = ht]
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
ylab("Velocidad (m/s)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
vad.t[, .N, by = ht]
vad.dt[, .N, by = ht]
139/3
3/139
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.06, evaluation = .N)$y,
by = ht]
vad.dt[, na.acum := zoo::rollsum(is.na(spd), k = 6, fill = NA), by = ht]
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
ylab("Velocidad (m/s)") +
theme_minimal()
ggplot(vad.dt, aes(date_time)) +
geom_col(aes(y = na.acum)) +
geom_line(aes(y = spd)) +
geom_line(aes(y = spd.smooth), color = "red") +
facet_wrap(~ht) +
ylab("Velocidad (m/s)") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red") +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..)) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red", binwidth = 2) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 2) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.065, evaluation = .N)$y,
by = ht]
vad.dt[, na.acum := zoo::rollsum(is.na(spd), k = 6, fill = NA), by = ht]
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 5, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 4, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 4, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
geom_point(aes(size = ifelse(rmse >0.5, rmse, NA)), type = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 4, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
geom_point(aes(size = ifelse(rmse >0.5, rmse, NA)), shape = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 4, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
geom_point(aes(size = ifelse(rmse2 >0.5, rmse2, NA)), shape = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
vad.dt[, spd.smooth := loess.smooth(date_time, spd, span = 0.06, evaluation = .N)$y,
by = ht]
vad.dt[, na.acum := zoo::rollsum(is.na(spd), k = 6, fill = NA), by = ht]
ggplot(subset(vad.dt, ht < 2.0), aes(date_time, ht)) +
# meteoR::stat_contour_fill(aes( z = spd.smooth)) +
geom_contour(aes(z = ifelse(na.acum <= 4, spd.smooth, NA)), color = "red", binwidth = 1) +
scale_colour_gradient(name = "Velocidad", low = "grey", high = "black") +
# geom_tile(fill = "white", data = vad.dt[na.acum >= 5]) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
geom_point(aes(size = ifelse(rmse2 >0.5, rmse2, NA)), shape = 1) +
ylab("Altura (Km)") +
xlab("Tiempo") +
theme_minimal()
library(ggplot2)
library(reshape2)
library(lubridate)
library(RadioSonde)
library(gridBase)
library(grid)
library(magrittr)
library(data.table)
library(zoo)
source("geom_arrow.R")
source("helpfun.R")
View(vad_20170120)
evad <- read.csv("../../20170120_240/elev_vda-2017-01-20T11:00:04Z_INTA_Parana.csv", sep = ";", na.strings = -9999)
View(evad)
subset(evad, elev == 1.9)
subset(evad, elev >1)
subset(evad, elev == elev[961])
library(ggplot2)
library(reshape2)
library(lubridate)
library(RadioSonde)
library(gridBase)
library(grid)
library(magrittr)
library(data.table)
library(zoo)
source("geom_arrow.R")
source("helpfun.R")
vad_20170120 <- read.vad("../../20170120_240/vda*")
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
ggplot(perfiles, aes(ht, spd, color = as.factor(hour(date_time)))) +
geom_line() +
coord_flip() +
scale_color_brewer(palette = "Set1", name="Tiempo", type = "qual") +
ylab("Viento (m/s)") +
xlab("Altura (Km)") +
labs(title = paste0("Perfiles de viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
View(dia)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
tiempos <- subset(dia, minute(date_time) == 0)
View(tiempos)
dia <- vad_20170120
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(dia, aes(date_time, ht)) +
geom_contour(aes(z = spd, color = ..level..), binwidth = 1) +
#geom_contour(data = vad_20160114_3, aes(z = spd)) +
scale_color_distiller(name = "Velocidad", type = "seq", palette = 8, direction = 1) +
geom_point(data = subset(dia, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(dia, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
ylim(c(0,2)) + xlab("Tiempo") +
ylab("Altura (km)") +
labs(title = paste0("Campo de viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
#geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
dia <- vad_20170111
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
20
20
dia <- vad_20170120
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd))
tiempo <- subset(tiempos, !is.na(spd))
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd))
tiempo <- subset(tiempos, !is.na(spd) & !is.na(di))
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
geom_text(aes(size = spd, angle = di), label = "\u27f6")
tiempo
ggplot(tiempos, aes(date_time, ht)) +
geom_text(aes(size = spd, angle = di), label = "\u27f6")
