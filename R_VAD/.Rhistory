vad_20160114_1 <- read.vad("../Test/temporal/temp-1/vda*")
vad_20160114_5 <- read.vad("../Test/temporal/temp-5/vda*")
dia <- vad_20170120
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 00)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
tiempos
View(tiempos)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 00)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
dia <- vad_20170120
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 00)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
str(vad_20160114)
str(vad_20170120)
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
str(tiempos)
unique(tiempos$date_time)
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
unique(tiempos$date_time)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
geom_arrow <- function(aes, direction = -1, start = -1/2*pi, ...) {
# geom para graficar flechas más fácilmente.
# aes requeridos :
#  * mag (magnitud) y angle (ángulo en radianes)
#  * vx (velocidad en dirección x) y vy (velocidad en dirección y)
#
# Otros parámetros:
#   direction: dirección del ángulo. 1 para antihorario, -1 para horario
#   start: ángulo de inicio. 0 para empezar desde el eje x, -1/4*pi para
#   el ángulo meteorológico
#   ... : otros parámetros para geom_text
if (!is.null(aes$angle) & !is.null(aes$mag)) {
angle <- deparse(aes$angle)
aes.angle <- paste0(start,  "+", direction, "*", angle)
geom_text(aes_string(size = aes$mag,
angle = aes.angle,
color = aes$colour),
label = "\u27f6", ...)
} else if (!is.null(aes$vy) & !is.null(aes$vx)) {
aes.angle <- paste0("atan2(", aes$vy, ", ", aes$vx, ")*180/pi")
aes.size <- paste0("sqrt(", aes$vx, "^2 + ", aes$vy, "^2)")
geom_text(aes_string(size = aes.size, angle = aes.angle,
color = aes$colour), label = "\u27f6", ...)
} else {
stop("geom_arrow needs either angle and mag or vx and vy")
}
}
test <- data.frame(mag = 1)
test$dir <- c(360, 90, 180, 70)
test <- data.frame(mag = rep(1, 4))
test$dir <- c(360, 90, 180, 70)
test
ggplot(test, aes(1, 1)) +
geom_arrow(aes(mag = mag, dir = dir))
ggplot(test, aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
ggplot(test[1], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
ggplot(test[1,,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
ggplot(test[1,,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir), start = 0, direction = 1)
ggplot(test[1,,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir), start = -90, direction = -1)
source('~/Dropbox/Tesis/VAD/geom_arrow.R', echo=TRUE)
ggplot(test[1,,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
ggplot(test[2,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
ggplot(test[4,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
ggplot(test[3,], aes(1, 1)) +
geom_arrow(aes(mag = mag, angle = dir))
source('~/.active-rstudio-document', echo=TRUE)
source('~/.active-rstudio-document', echo=TRUE)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
head(tiempo)
head(tiempos)
read.vad <- function(path){
filename <- (Sys.glob(path))
datetime <- ymd_hms(stringi::stri_sub(filename, from = 21, to = 41))
for (i in 1:length(filename)){
temp <- read.csv(filename[i], sep = ";", dec = ".", na.strings = "-9999")
date_time <- datetime[i]
temp$date_time <- date_time
if (i == 1){
temp2 <- temp
} else {
temp2 <- rbind(temp2, temp)
}
}
temp2$di <- temp2$di
temp2$u <- temp2$spd * cos(temp2$di*pi/180)
temp2$v <- temp2$spd * sin(temp2$di*pi/180)
return(temp2)
}
vad_20160114 <- read.vad("../20160114_240/vda*")
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
vad_20160123 <- read.vad("../20160123_240/vda*")
vad_20160111 <- read.vad("../20160111_240/vda*")
vad_20160116 <- read.vad("../20160116_240/vda*")
vad_20160201 <- read.vad("../20160201_240/vda*")
vad_20160228 <- read.vad("../20160228_240/vda*")
vad_20170111 <- read.vad("../20170111_240/vda*")
vad_20170120 <- read.vad("../20170120_240/vda*")
vad_20170121 <- read.vad("../20170121_240/vda*")
vad_20160114_3 <- read.vad("../Test/temporal/temp-3/vda*")
vad_20160114_1 <- read.vad("../Test/temporal/temp-1/vda*")
vad_20160114_5 <- read.vad("../Test/temporal/temp-5/vda*")
dia <- vad_20170120
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
temops
tiempos
head(tiemops)
head(tiempos)
ggplot(subset(tiempos, hour(date_time) < 4), aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
max(tiempos$ht)
unique(tiempos$date_time)
ggplot(subset(tiempos, date_time %in% unique(date_time)[1]), aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(temp, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(temp, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(subset(tiempos, date_time %in% unique(date_time)[1]), aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(tiempos, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(tiempos, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(data = subset(tiempos, rmse > 0.5), aes(size = rmse), shape = 1, color = "black") +
geom_point(data = subset(tiempos, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(data = subset(tiempos, rmse2 > 0.5), aes(size = rmse2), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(tiempos, aes(date_time, ht)) +
geom_arrow(aes(mag = spd, angle = di, color = spd)) +
geom_point(aes(size = ifelse(rmse > 0.5, rmse, NA)), shape = 1, color = "black") +
geom_point(aes(size = ifelse(rmse2 > 0.5, rmse2, NA)), shape = 4, color = "grey25") +
scale_size_continuous(range = c(0, 5), guide = "none") +
scale_color_distiller(palette = "Oranges", name="Velocidad", direction = 1) +
xlab("Tiempo (hora UTC)") + ylab("Altura (km)") +
ylim(c(0,2)) +
scale_x_datetime(date_breaks = "2 hour", date_labels = "%H z") +
theme(axis.text.x = element_text(angle = 45)) +
labs(title = paste0("Dirección del viento para el ", as.Date(dia$date_time[1]))) +
theme_minimal()
ggplot(perfiles, aes(u, v,  color = as.factor(hour(date_time)))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(data=subset(perfiles, ht == 0.1), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(perfiles, aes(u, v,  color = as.factor(hour(date_time)))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(data=subset(perfiles, ht == 0.1), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
perfiles
ggplot(subset(perfiles, ht == 0.1), aes(u, v,  color = as.factor(ht))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(data=subset(perfiles, ht == 0.1), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
ggplot(subset(perfiles, ht == 0.1), aes(u, v,  color = as.factor(ht))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(data=subset(perfiles, hout(datetime) == 1), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
ggplot(subset(perfiles, ht == 0.1), aes(u, v,  color = as.factor(ht))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(data=subset(perfiles, hour(datetime) == 1), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
subset(perfiles, ht == 0.1)
ggplot(subset(perfiles, ht == 0.2), aes(u, v,  color = as.factor(ht))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(data=subset(perfiles, hour(datetime) == 1), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
ggplot(subset(perfiles, ht == 0.2), aes(u, v,  color = as.factor(ht))) +
geom_point(data=subset(perfiles, ht != 0.1), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
ggplot(subset(perfiles, ht == 0.2), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Hora", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
ggplot(subset(perfiles, ht %in% c(0.3, 1.0)), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Nivel", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
View(perfiles)
ggplot(subset(tiempos, ht %in% c(0.3, 1.0)), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Nivel", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
View(tiempos)
source('~/Dropbox/Tesis/VAD/helpfun.R', echo=TRUE)
vad_20160114 <- read.vad("../20160114_240/vda*")
vad_20160123 <- read.vad("../20160123_240/vda*")
vad_20160111 <- read.vad("../20160111_240/vda*")
vad_20160116 <- read.vad("../20160116_240/vda*")
vad_20160201 <- read.vad("../20160201_240/vda*")
vad_20160228 <- read.vad("../20160228_240/vda*")
vad_20170111 <- read.vad("../20170111_240/vda*")
vad_20170120 <- read.vad("../20170120_240/vda*")
vad_20170121 <- read.vad("../20170121_240/vda*")
ia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
t
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(subset(tiempos, ht %in% c(0.3, 1.0)), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Nivel", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
source('~/Dropbox/Tesis/VAD/helpfun.R', echo=TRUE)
vad_20160114 <- read.vad("../20160114_240/vda*")
dia <- vad_20160114
perfiles <- subset(dia, ht < 1.5 & minute(date_time) == 00 & hour(date_time) %in% c(0, 6, 12, 18, 23))
tiempos <- subset(dia, minute(date_time) == 0)
ggplot(subset(tiempos, ht %in% c(0.3, 1.0)), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Nivel", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-10,14)) +
ylim(c(-10,14)) +
coord_equal() +
theme_minimal()
ggplot(subset(tiempos, ht %in% c(0.3, 1.0)), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Nivel", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-12,10)) +
ylim(c(-12,10)) +
coord_equal() +
theme_minimal()
ggplot(subset(tiempos, ht %in% c(0.3, 1.0)), aes(u, v,  color = as.factor(ht))) +
geom_point(aes(x = ifelse(hour(date_time) != 0, u, NA)), size = 1) +
geom_point(aes(x = ifelse(hour(date_time) == 0, u, NA)), shape = 17, size = 3) +
geom_path() +
scale_color_brewer(palette = "Set1", name="Nivel", type = "qual") +
xlab("u (m/s)") + ylab("v (m/s)") +
labs(title = paste0("Hodógrafa para el ", as.Date(dia$date_time[1]))) +
xlim(c(-12,10)) +
ylim(c(-14,10)) +
coord_equal() +
theme_minimal()
ggplot(subset(dia, ht < 1.7), aes(date_time, spd)) + geom_line(color = "#FF3300") + facet_wrap(~ht) +
xlab("Tiempo (hora UTC)") + ylab("Viento (m/s)") +
scale_x_datetime(date_breaks = "6 hour", date_labels = "%H") +
theme_minimal() + theme(axis.text.x = element_text(angle = 45))
View(dia)
subset(dia, ht == 0.3)
subset(dia, ht == 1.4)
max(subset(dia, ht == 1.4))
max(subset(dia$ht, ht == 1.4))
dia$ht
t <- subset(dia, ht == 1.4)
t
View(t)
subset(dia, date_time == as.POSIXct("2016-01-14 07:20:05"))
str(dia)
subset(dia, date_time == strftime("2016-01-14 07:20:05"))
strftime("2016-01-14 07:20:05")
as.POSIXct("2016-01-14 07:20:05")
subset(dia, date_time == strftime("2016-01-14 07:20:05", tz = "GMT"))
subset(dia, date_time == strftime("2016-01-14 07:20:05", tz = "UT"))
dia$date_time[1261]
subset(dia, date_time == strftime("2016-01-14 07:20:05", tz = "UTC"))
subset(dia, date_time == date_time[1261])
dia$date_time[1261]
str(dia$date_time[1261])
subset(dia, date_time == date_time[1261]) <- NA
dia <- within(dia, date_time$[date_time == date_time[1261]] <- NA)
dia <- within(dia, date_time[date_time == date_time[1261]] <- NA)
dia
